<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>C:\Users\hvrtwall\Documents\Arduino\myDIYs\myDIY-76 [flora-geo-watch] - Official\libraries\Flora-NeoGeo-Watch\Flora_NeoGeo_Watch\Flora_NeoGeo_Watch.ino</title>
    <style type="text/css">
    body.default {
    font-family: Courier New;
    color: #000000;
    background-color: #ffffff;
    font-size: 15.0px;
    font-weight: normal;
    font-style: normal;
}
span.commentdockeyworderror {
    color: #0000dd;
}
span.bracebad {
    color: #c86464;
    font-weight: bold;
}
span.stdin {
}
span.verbatim {
}
span.stdout {
}
span.operators {
    color: #781f87;
}
span.keywords2 {
    color: #871f78;
}
span.linenumbers {
    color: #989898;
}
span.UUIDs {
}
span.keywords {
    color: #871f78;
}
span.commentdockeyword {
}
span.regex {
    color: #c86400;
}
span.preprocessor {
    color: #696969;
}
span.stringeol {
}
span.default {
}
span.identifiers {
}
span.indent_guides {
    color: #808080;
}
span.comments {
    color: #696969;
    font-style: italic;
}
span.globalclass {
    color: #008b8b;
}
span.bracehighlight {
    color: #c86464;
    font-weight: bold;
}
span.stderr {
    color: #0000ff;
    font-style: italic;
}
span.strings {
    color: #23238e;
}
span.control_characters {
}
span.numbers {
    color: #8b0000;
}

    </style>
    </head>
    <body class="default"><p>
<br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Test&nbsp;code&nbsp;for&nbsp;Adafruit&nbsp;Flora&nbsp;GPS&nbsp;modules
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;This&nbsp;code&nbsp;shows&nbsp;how&nbsp;to&nbsp;listen&nbsp;to&nbsp;the&nbsp;GPS&nbsp;module&nbsp;in&nbsp;an&nbsp;interrupt
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;which&nbsp;allows&nbsp;the&nbsp;program&nbsp;to&nbsp;have&nbsp;more&nbsp;'freedom'&nbsp;-&nbsp;just&nbsp;parse
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;when&nbsp;a&nbsp;new&nbsp;NMEA&nbsp;sentence&nbsp;is&nbsp;available!&nbsp;Then&nbsp;access&nbsp;data&nbsp;when
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;desired.
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;8&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Tested&nbsp;and&nbsp;works&nbsp;great&nbsp;with&nbsp;the&nbsp;Adafruit&nbsp;Flora&nbsp;GPS&nbsp;module
</span><br /><span class="linenumbers">&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;------&gt;&nbsp;http://adafruit.com/products/1059
</span><br /><span class="linenumbers">&nbsp;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Pick&nbsp;one&nbsp;up&nbsp;today&nbsp;at&nbsp;the&nbsp;Adafruit&nbsp;electronics&nbsp;shop
</span><br /><span class="linenumbers">&nbsp;&nbsp;11&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;and&nbsp;help&nbsp;support&nbsp;open&nbsp;source&nbsp;hardware&nbsp;&amp;&nbsp;software!&nbsp;-ada
</span><br /><span class="linenumbers">&nbsp;&nbsp;12&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;13&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#include&nbsp;&lt;Adafruit_GPS.h&gt;
</span><br /><span class="linenumbers">&nbsp;&nbsp;14&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#include&nbsp;&lt;Adafruit_NeoPixel.h&gt;
</span><br /><span class="linenumbers">&nbsp;&nbsp;15&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#include&nbsp;&lt;SoftwareSerial.h&gt;
</span><br /><span class="linenumbers">&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#include&nbsp;&lt;Time.h&gt;
</span><br /><span class="linenumbers">&nbsp;&nbsp;17&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#include&nbsp;&lt;Wire.h&gt;
</span><br /><span class="linenumbers">&nbsp;&nbsp;18&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#include&nbsp;&lt;Adafruit_Sensor.h&gt;
</span><br /><span class="linenumbers">&nbsp;&nbsp;19&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#include&nbsp;&lt;Adafruit_LSM303_U.h&gt;
</span><br /><span class="linenumbers">&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">Adafruit_GPS</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">(&amp;</span><span class="identifiers">Serial1</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;&nbsp;22&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">/*&nbsp;Assign&nbsp;a&nbsp;unique&nbsp;ID&nbsp;to&nbsp;this&nbsp;sensor&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;*/</span>
<br /><span class="linenumbers">&nbsp;&nbsp;23&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">Adafruit_LSM303_Mag_Unified</span><span class="default">&nbsp;</span><span class="identifiers">mag</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">Adafruit_LSM303_Mag_Unified</span><span class="operators">(</span><span class="numbers">12345</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;25&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Set&nbsp;GPSECHO&nbsp;to&nbsp;'false'&nbsp;to&nbsp;turn&nbsp;off&nbsp;echoing&nbsp;the&nbsp;GPS&nbsp;data&nbsp;to&nbsp;the&nbsp;Serial&nbsp;console
</span><br /><span class="linenumbers">&nbsp;&nbsp;26&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Set&nbsp;to&nbsp;'true'&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;debug&nbsp;and&nbsp;listen&nbsp;to&nbsp;the&nbsp;raw&nbsp;GPS&nbsp;sentences
</span><br /><span class="linenumbers">&nbsp;&nbsp;27&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#define&nbsp;GPSECHO&nbsp;false
</span><br /><span class="linenumbers">&nbsp;&nbsp;28&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;29&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;this&nbsp;keeps&nbsp;track&nbsp;of&nbsp;whether&nbsp;we're&nbsp;using&nbsp;the&nbsp;interrupt
</span><br /><span class="linenumbers">&nbsp;&nbsp;30&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;off&nbsp;by&nbsp;default!
</span><br /><span class="linenumbers">&nbsp;&nbsp;31&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">boolean</span><span class="default">&nbsp;</span><span class="identifiers">usingInterrupt</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="keywords">false</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;32&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;33&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//--------------------------------------------------|
</span><br /><span class="linenumbers">&nbsp;&nbsp;34&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WAYPOINT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;35&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//--------------------------------------------------|
</span><br /><span class="linenumbers">&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//Please&nbsp;enter&nbsp;the&nbsp;latitude&nbsp;and&nbsp;longitude&nbsp;of&nbsp;your&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;37&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//desired&nbsp;destination:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;38&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#define&nbsp;GEO_LAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;52.5072231&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;48.009551
</span><br /><span class="linenumbers">&nbsp;&nbsp;39&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#define&nbsp;GEO_LON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13.3096588&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//-88.771131
</span><br /><span class="linenumbers">&nbsp;&nbsp;40&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//--------------------------------------------------|
</span><br /><span class="linenumbers">&nbsp;&nbsp;41&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//Your&nbsp;NeoPixel&nbsp;ring&nbsp;may&nbsp;not&nbsp;line&nbsp;up&nbsp;with&nbsp;ours.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;42&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//Enter&nbsp;which&nbsp;NeoPixel&nbsp;led&nbsp;is&nbsp;your&nbsp;top&nbsp;LED&nbsp;(0-15).&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;43&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#define&nbsp;TOP_LED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1
</span><br /><span class="linenumbers">&nbsp;&nbsp;44&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//--------------------------------------------------|
</span><br /><span class="linenumbers">&nbsp;&nbsp;45&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//Your&nbsp;compass&nbsp;module&nbsp;may&nbsp;not&nbsp;line&nbsp;up&nbsp;with&nbsp;ours.&nbsp;&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;46&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//Once&nbsp;you&nbsp;run&nbsp;compass&nbsp;mode,&nbsp;compare&nbsp;to&nbsp;a&nbsp;separate&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;47&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//compass&nbsp;(like&nbsp;one&nbsp;found&nbsp;on&nbsp;your&nbsp;smartphone).&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;48&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//Point&nbsp;your&nbsp;TOP_LED&nbsp;north,&nbsp;then&nbsp;count&nbsp;clockwise&nbsp;&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;49&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//how&nbsp;many&nbsp;LEDs&nbsp;away&nbsp;from&nbsp;TOP_LED&nbsp;the&nbsp;lit&nbsp;LED&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;|
</span><br /><span class="linenumbers">&nbsp;&nbsp;50&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="preprocessor">#define&nbsp;LED_OFFSET&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
</span><br /><span class="linenumbers">&nbsp;&nbsp;51&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//--------------------------------------------------|
</span><br /><span class="linenumbers">&nbsp;&nbsp;52&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;53&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Navigation&nbsp;location
</span><br /><span class="linenumbers">&nbsp;&nbsp;54&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">targetLat</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">GEO_LAT</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;55&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">targetLon</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">GEO_LON</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;56&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;57&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Trip&nbsp;distance
</span><br /><span class="linenumbers">&nbsp;&nbsp;58&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">tripDistance</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;59&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;60&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">Adafruit_NeoPixel</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">Adafruit_NeoPixel</span><span class="operators">(</span><span class="numbers">16</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">6</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">NEO_GRB</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="identifiers">NEO_KHZ800</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;&nbsp;61&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;62&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Offset&nbsp;hours&nbsp;from&nbsp;gps&nbsp;time&nbsp;(UTC)
</span><br /><span class="linenumbers">&nbsp;&nbsp;63&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">const</span><span class="default">&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">offset</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Central&nbsp;European&nbsp;Time
</span><br /><span class="linenumbers">&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//const&nbsp;int&nbsp;offset&nbsp;=&nbsp;-4;&nbsp;&nbsp;//&nbsp;Eastern&nbsp;Daylight&nbsp;Time&nbsp;(USA)
</span><br /><span class="linenumbers">&nbsp;&nbsp;65&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//const&nbsp;int&nbsp;offset&nbsp;=&nbsp;-5;&nbsp;&nbsp;//&nbsp;Central&nbsp;Daylight&nbsp;Time&nbsp;(USA)
</span><br /><span class="linenumbers">&nbsp;&nbsp;66&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//const&nbsp;int&nbsp;offset&nbsp;=&nbsp;-8;&nbsp;&nbsp;//&nbsp;Pacific&nbsp;Standard&nbsp;Time&nbsp;(USA)
</span><br /><span class="linenumbers">&nbsp;&nbsp;67&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//const&nbsp;int&nbsp;offset&nbsp;=&nbsp;-7;&nbsp;&nbsp;//&nbsp;Pacific&nbsp;Daylight&nbsp;Time&nbsp;(USA)
</span><br /><span class="linenumbers">&nbsp;&nbsp;68&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;69&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">topLED</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">TOP_LED</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;70&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">compassOffset</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">LED_OFFSET</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;71&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;72&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">lastMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;73&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">lastHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;74&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">startLED</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;75&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">startLEDlast</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;76&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">lastCombined</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;77&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">start</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;78&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;79&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">lastDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;81&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;82&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;83&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">compassReading</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;84&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;85&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Calibration&nbsp;offsets
</span><br /><span class="linenumbers">&nbsp;&nbsp;86&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">magxOffset</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">2.55</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;87&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">magyOffset</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">27.95</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;88&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;89&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Pushbutton&nbsp;setup
</span><br /><span class="linenumbers">&nbsp;&nbsp;90&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">buttonPin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">10</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;number&nbsp;of&nbsp;the&nbsp;pushbutton&nbsp;pin
</span><br /><span class="linenumbers">&nbsp;&nbsp;91&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">buttonState</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;current&nbsp;reading&nbsp;from&nbsp;the&nbsp;input&nbsp;pin
</span><br /><span class="linenumbers">&nbsp;&nbsp;92&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">lastButtonState</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">HIGH</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;previous&nbsp;reading&nbsp;from&nbsp;the&nbsp;input&nbsp;pin
</span><br /><span class="linenumbers">&nbsp;&nbsp;93&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">long</span><span class="default">&nbsp;</span><span class="identifiers">buttonHoldTime</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;last&nbsp;time&nbsp;the&nbsp;output&nbsp;pin&nbsp;was&nbsp;toggled
</span><br /><span class="linenumbers">&nbsp;&nbsp;94&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">long</span><span class="default">&nbsp;</span><span class="identifiers">buttonHoldDelay</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">2500</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;how&nbsp;long&nbsp;to&nbsp;hold&nbsp;the&nbsp;button&nbsp;down
</span><br /><span class="linenumbers">&nbsp;&nbsp;95&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;&nbsp;96&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;following&nbsp;variables&nbsp;are&nbsp;long's&nbsp;because&nbsp;the&nbsp;time,&nbsp;measured&nbsp;in&nbsp;miliseconds,
</span><br /><span class="linenumbers">&nbsp;&nbsp;97&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;will&nbsp;quickly&nbsp;become&nbsp;a&nbsp;bigger&nbsp;number&nbsp;than&nbsp;can&nbsp;be&nbsp;stored&nbsp;in&nbsp;an&nbsp;int.
</span><br /><span class="linenumbers">&nbsp;&nbsp;98&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">long</span><span class="default">&nbsp;</span><span class="identifiers">lastDebounceTime</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;last&nbsp;time&nbsp;the&nbsp;output&nbsp;pin&nbsp;was&nbsp;toggled
</span><br /><span class="linenumbers">&nbsp;&nbsp;99&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">long</span><span class="default">&nbsp;</span><span class="identifiers">debounceDelay</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">50</span><span class="operators">;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;debounce&nbsp;time;&nbsp;increase&nbsp;if&nbsp;the&nbsp;output&nbsp;flickers
</span><br /><span class="linenumbers">&nbsp;100&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">long</span><span class="default">&nbsp;</span><span class="identifiers">menuDelay</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">2500</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;101&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">long</span><span class="default">&nbsp;</span><span class="identifiers">menuTime</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;102&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;103&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">fLat</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0.0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;104&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">fLon</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0.0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;105&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;106&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">setup</span><span class="operators">()</span>
<br /><span class="linenumbers">&nbsp;107&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;108&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;connect&nbsp;at&nbsp;115200&nbsp;so&nbsp;we&nbsp;can&nbsp;read&nbsp;the&nbsp;GPS&nbsp;fast&nbsp;enough&nbsp;and&nbsp;echo&nbsp;without&nbsp;dropping&nbsp;chars
</span><br /><span class="linenumbers">&nbsp;109&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;also&nbsp;spit&nbsp;it&nbsp;out
</span><br /><span class="linenumbers">&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">Serial</span><span class="operators">.</span><span class="identifiers">begin</span><span class="operators">(</span><span class="numbers">115200</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;111&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">Serial</span><span class="operators">.</span><span class="identifiers">println</span><span class="operators">(</span><span class="strings">"Adafruit&nbsp;GPS&nbsp;library&nbsp;basic&nbsp;test!"</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;112&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;113&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;9600&nbsp;NMEA&nbsp;is&nbsp;the&nbsp;default&nbsp;baud&nbsp;rate&nbsp;for&nbsp;Adafruit&nbsp;MTK&nbsp;GPS's-&nbsp;some&nbsp;use&nbsp;4800
</span><br /><span class="linenumbers">&nbsp;114&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">begin</span><span class="operators">(</span><span class="numbers">9600</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;115&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;uncomment&nbsp;this&nbsp;line&nbsp;to&nbsp;turn&nbsp;on&nbsp;RMC&nbsp;(recommended&nbsp;minimum)&nbsp;and&nbsp;GGA&nbsp;(fix&nbsp;data)&nbsp;including&nbsp;altitude
</span><br /><span class="linenumbers">&nbsp;116&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">sendCommand</span><span class="operators">(</span><span class="identifiers">PMTK_SET_NMEA_OUTPUT_RMCGGA</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;117&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;uncomment&nbsp;this&nbsp;line&nbsp;to&nbsp;turn&nbsp;on&nbsp;only&nbsp;the&nbsp;"minimum&nbsp;recommended"&nbsp;data
</span><br /><span class="linenumbers">&nbsp;118&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//GPS.sendCommand(PMTK_SET_NMEA_OUTPUT_RMCONLY);
</span><br /><span class="linenumbers">&nbsp;119&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;For&nbsp;parsing&nbsp;data,&nbsp;we&nbsp;don't&nbsp;suggest&nbsp;using&nbsp;anything&nbsp;but&nbsp;either&nbsp;RMC&nbsp;only&nbsp;or&nbsp;RMC+GGA&nbsp;since
</span><br /><span class="linenumbers">&nbsp;120&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;the&nbsp;parser&nbsp;doesn't&nbsp;care&nbsp;about&nbsp;other&nbsp;sentences&nbsp;at&nbsp;this&nbsp;time
</span><br /><span class="linenumbers">&nbsp;121&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;Set&nbsp;the&nbsp;update&nbsp;rate
</span><br /><span class="linenumbers">&nbsp;122&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">sendCommand</span><span class="operators">(</span><span class="identifiers">PMTK_SET_NMEA_UPDATE_1HZ</span><span class="operators">);</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;1&nbsp;Hz&nbsp;update&nbsp;rate
</span><br /><span class="linenumbers">&nbsp;123&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;For&nbsp;the&nbsp;parsing&nbsp;code&nbsp;to&nbsp;work&nbsp;nicely&nbsp;and&nbsp;have&nbsp;time&nbsp;to&nbsp;sort&nbsp;thru&nbsp;the&nbsp;data,&nbsp;and
</span><br /><span class="linenumbers">&nbsp;124&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;print&nbsp;it&nbsp;out&nbsp;we&nbsp;don't&nbsp;suggest&nbsp;using&nbsp;anything&nbsp;higher&nbsp;than&nbsp;1&nbsp;Hz
</span><br /><span class="linenumbers">&nbsp;125&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;126&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;Request&nbsp;updates&nbsp;on&nbsp;antenna&nbsp;status,&nbsp;comment&nbsp;out&nbsp;to&nbsp;keep&nbsp;quiet
</span><br /><span class="linenumbers">&nbsp;127&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">sendCommand</span><span class="operators">(</span><span class="identifiers">PGCMD_ANTENNA</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;128&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;129&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">/*&nbsp;Initialise&nbsp;the&nbsp;sensor&nbsp;*/</span>
<br /><span class="linenumbers">&nbsp;130&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="operators">(!</span><span class="identifiers">mag</span><span class="operators">.</span><span class="identifiers">begin</span><span class="operators">())</span>
<br /><span class="linenumbers">&nbsp;131&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;132&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">/*&nbsp;There&nbsp;was&nbsp;a&nbsp;problem&nbsp;detecting&nbsp;the&nbsp;LSM303&nbsp;...&nbsp;check&nbsp;your&nbsp;connections&nbsp;*/</span>
<br /><span class="linenumbers">&nbsp;133&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">Serial</span><span class="operators">.</span><span class="identifiers">println</span><span class="operators">(</span><span class="strings">"Ooops,&nbsp;no&nbsp;LSM303&nbsp;detected&nbsp;...&nbsp;Check&nbsp;your&nbsp;wiring!"</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;134&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">while</span><span class="operators">(</span><span class="numbers">1</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;135&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;136&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;Ask&nbsp;for&nbsp;firmware&nbsp;version
</span><br /><span class="linenumbers">&nbsp;137&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">Serial1</span><span class="operators">.</span><span class="identifiers">println</span><span class="operators">(</span><span class="identifiers">PMTK_Q_RELEASE</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;138&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;139&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">begin</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;140&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;Initialize&nbsp;all&nbsp;pixels&nbsp;to&nbsp;'off'
</span><br /><span class="linenumbers">&nbsp;141&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;142&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;Make&nbsp;input&nbsp;&amp;&nbsp;enable&nbsp;pull-up&nbsp;resistors&nbsp;on&nbsp;switch&nbsp;pins&nbsp;for&nbsp;pushbutton
</span><br /><span class="linenumbers">&nbsp;143&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">pinMode</span><span class="operators">(</span><span class="identifiers">buttonPin</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">INPUT</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;144&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">digitalWrite</span><span class="operators">(</span><span class="identifiers">buttonPin</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">HIGH</span><span class="operators">);</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;145&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;146&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;147&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">uint32_t</span><span class="default">&nbsp;</span><span class="identifiers">gpsTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;148&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">uint32_t</span><span class="default">&nbsp;</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;149&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">uint32_t</span><span class="default">&nbsp;</span><span class="identifiers">compassTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;150&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;151&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">loop</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;run&nbsp;over&nbsp;and&nbsp;over&nbsp;again
</span><br /><span class="linenumbers">&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;153&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">compassCheck</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;154&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;read&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;switch&nbsp;into&nbsp;a&nbsp;local&nbsp;variable:
</span><br /><span class="linenumbers">&nbsp;155&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">buttonState</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">digitalRead</span><span class="operators">(</span><span class="identifiers">buttonPin</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;156&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;157&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">buttonState</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="identifiers">LOW</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;158&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">buttonCheck</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;159&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;160&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;161&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">lastButtonState</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">buttonState</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;162&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;163&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//Serial.println(buttonState);
</span><br /><span class="linenumbers">&nbsp;164&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;read&nbsp;data&nbsp;from&nbsp;the&nbsp;GPS&nbsp;in&nbsp;the&nbsp;'main&nbsp;loop'
</span><br /><span class="linenumbers">&nbsp;165&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">char</span><span class="default">&nbsp;</span><span class="identifiers">c</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">read</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;166&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;debug,&nbsp;this&nbsp;is&nbsp;a&nbsp;good&nbsp;time&nbsp;to&nbsp;do&nbsp;it!
</span><br /><span class="linenumbers">&nbsp;167&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">GPSECHO</span><span class="operators">)</span>
<br /><span class="linenumbers">&nbsp;168&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">c</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="identifiers">Serial</span><span class="operators">.</span><span class="identifiers">print</span><span class="operators">(</span><span class="identifiers">c</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;169&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;if&nbsp;a&nbsp;sentence&nbsp;is&nbsp;received,&nbsp;we&nbsp;can&nbsp;check&nbsp;the&nbsp;checksum,&nbsp;parse&nbsp;it...
</span><br /><span class="linenumbers">&nbsp;170&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">newNMEAreceived</span><span class="operators">())</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;171&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;a&nbsp;tricky&nbsp;thing&nbsp;here&nbsp;is&nbsp;if&nbsp;we&nbsp;print&nbsp;the&nbsp;NMEA&nbsp;sentence,&nbsp;or&nbsp;data
</span><br /><span class="linenumbers">&nbsp;172&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;we&nbsp;end&nbsp;up&nbsp;not&nbsp;listening&nbsp;and&nbsp;catching&nbsp;other&nbsp;sentences!
</span><br /><span class="linenumbers">&nbsp;173&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;so&nbsp;be&nbsp;very&nbsp;wary&nbsp;if&nbsp;using&nbsp;OUTPUT_ALLDATA&nbsp;and&nbsp;trytng&nbsp;to&nbsp;print&nbsp;out&nbsp;data
</span><br /><span class="linenumbers">&nbsp;174&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">Serial</span><span class="operators">.</span><span class="identifiers">println</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">lastNMEA</span><span class="operators">());</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;this&nbsp;also&nbsp;sets&nbsp;the&nbsp;newNMEAreceived()&nbsp;flag&nbsp;to&nbsp;false
</span><br /><span class="linenumbers">&nbsp;175&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(!</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">parse</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">lastNMEA</span><span class="operators">()))</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;this&nbsp;also&nbsp;sets&nbsp;the&nbsp;newNMEAreceived()&nbsp;flag&nbsp;to&nbsp;false
</span><br /><span class="linenumbers">&nbsp;176&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">return</span><span class="operators">;</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;we&nbsp;can&nbsp;fail&nbsp;to&nbsp;parse&nbsp;a&nbsp;sentence&nbsp;in&nbsp;which&nbsp;case&nbsp;we&nbsp;should&nbsp;just&nbsp;wait&nbsp;for&nbsp;another
</span><br /><span class="linenumbers">&nbsp;177&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;178&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;179&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;if&nbsp;millis()&nbsp;or&nbsp;timer&nbsp;wraps&nbsp;around,&nbsp;we'll&nbsp;just&nbsp;reset&nbsp;it
</span><br /><span class="linenumbers">&nbsp;180&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">gpsTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">())</span><span class="default">&nbsp;</span><span class="identifiers">gpsTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;181&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;182&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">start</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;183&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">fix</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;184&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;set&nbsp;the&nbsp;Time&nbsp;to&nbsp;the&nbsp;latest&nbsp;GPS&nbsp;reading
</span><br /><span class="linenumbers">&nbsp;185&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">setTime</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">hour</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">minute</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">seconds</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">day</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">month</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">year</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;186&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">delay</span><span class="operators">(</span><span class="numbers">50</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;187&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">adjustTime</span><span class="operators">(</span><span class="identifiers">offset</span><span class="default">&nbsp;</span><span class="operators">*</span><span class="default">&nbsp;</span><span class="identifiers">SECS_PER_HOUR</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;188&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">delay</span><span class="operators">(</span><span class="numbers">500</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;189&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">tripDistance</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="keywords">double</span><span class="operators">)</span><span class="identifiers">calc_dist</span><span class="operators">(</span><span class="identifiers">fLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">fLon</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLon</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;190&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">start</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;191&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;192&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;
</span><br /><span class="linenumbers">&nbsp;193&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;approximately&nbsp;every&nbsp;60&nbsp;seconds&nbsp;or&nbsp;so,&nbsp;update&nbsp;time
</span><br /><span class="linenumbers">&nbsp;194&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">millis</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">gpsTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">60000</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">&amp;&amp;</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">start</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;195&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">gpsTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;reset&nbsp;the&nbsp;timer
</span><br /><span class="linenumbers">&nbsp;196&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">fix</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;set&nbsp;the&nbsp;Time&nbsp;to&nbsp;the&nbsp;latest&nbsp;GPS&nbsp;reading
</span><br /><span class="linenumbers">&nbsp;198&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">setTime</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">hour</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">minute</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">seconds</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">day</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">month</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">year</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;199&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">delay</span><span class="operators">(</span><span class="numbers">50</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;200&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">adjustTime</span><span class="operators">(</span><span class="identifiers">offset</span><span class="default">&nbsp;</span><span class="operators">*</span><span class="default">&nbsp;</span><span class="identifiers">SECS_PER_HOUR</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;201&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">delay</span><span class="operators">(</span><span class="numbers">500</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;202&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;203&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;204&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;205&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">fix</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;206&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">fLat</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">decimalDegrees</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">latitude</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">lat</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;207&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">fLon</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">decimalDegrees</span><span class="operators">(</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">longitude</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">GPS</span><span class="operators">.</span><span class="identifiers">lon</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;208&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;209&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;210&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;211&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">clockMode</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;212&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;213&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;214&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;215&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">navMode</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;216&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;217&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;218&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">2</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;219&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">compassMode</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;220&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;221&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;222&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;223&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Fill&nbsp;the&nbsp;dots&nbsp;one&nbsp;after&nbsp;the&nbsp;other&nbsp;with&nbsp;a&nbsp;color
</span><br /><span class="linenumbers">&nbsp;224&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">colorWipe</span><span class="operators">(</span><span class="identifiers">uint32_t</span><span class="default">&nbsp;</span><span class="identifiers">c</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">uint8_t</span><span class="default">&nbsp;</span><span class="identifiers">wait</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;225&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">for</span><span class="operators">(</span><span class="identifiers">uint16_t</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="operators">=</span><span class="numbers">0</span><span class="operators">;</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="operators">&lt;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">numPixels</span><span class="operators">();</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="operators">++)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;226&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">i</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">c</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;227&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;228&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">delay</span><span class="operators">(</span><span class="identifiers">wait</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;229&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;230&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;231&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;232&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">buttonCheck</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;233&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">menuTime</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;234&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">buttonState</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">digitalRead</span><span class="operators">(</span><span class="identifiers">buttonPin</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;235&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">buttonState</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="identifiers">LOW</span><span class="default">&nbsp;</span><span class="operators">&amp;&amp;</span><span class="default">&nbsp;</span><span class="identifiers">lastButtonState</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="identifiers">HIGH</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;236&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">buttonHoldTime</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;237&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;238&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;239&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">buttonState</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="identifiers">LOW</span><span class="default">&nbsp;</span><span class="operators">&amp;&amp;</span><span class="default">&nbsp;</span><span class="identifiers">lastButtonState</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="identifiers">LOW</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;240&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">millis</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">buttonHoldTime</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="identifiers">buttonHoldDelay</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;241&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;242&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="operators">(</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">2</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;243&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;244&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;245&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;246&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">colorWipe</span><span class="operators">(</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">),</span><span class="default">&nbsp;</span><span class="numbers">20</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;247&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">buttonHoldTime</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;248&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;249&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;250&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;251&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">colorWipe</span><span class="operators">(</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">),</span><span class="default">&nbsp;</span><span class="numbers">20</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;252&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">buttonHoldTime</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;253&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;254&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;255&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;256&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;257&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;258&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">clockMode</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;259&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">start</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;260&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">startLEDlast</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;261&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;262&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;263&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">gpsMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">minute</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">second</span><span class="operators">()/</span><span class="numbers">60.0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;264&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">unsigned</span><span class="default">&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">ledMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;265&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">minTemp</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;266&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">minTemp</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">topLED</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">gpsMin</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="numbers">1.875</span><span class="operators">)/</span><span class="numbers">3.75</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;267&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;268&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">minTemp</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;269&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">minTemp</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;270&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;271&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;272&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">minTemp</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;273&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;274&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;275&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">gpsHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">hour</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">minute</span><span class="operators">()/</span><span class="numbers">60.0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;276&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">gpsHour</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">12</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;277&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">gpsHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">gpsHour</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="numbers">12</span><span class="operators">;</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;278&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;279&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">unsigned</span><span class="default">&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">ledHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;280&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">hourTemp</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;281&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">hourTemp</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">topLED</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">gpsHour</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="numbers">.375</span><span class="operators">)/</span><span class="numbers">.75</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;282&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;283&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">hourTemp</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;284&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">hourTemp</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;285&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;286&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;287&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">hourTemp</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;288&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;289&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;290&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">ledHour</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="identifiers">ledMin</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">&amp;&amp;</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">lastCombined</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;291&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">lastHour</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;292&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">lastMin</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;293&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">ledHour</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">255</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;294&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;295&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastCombined</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;296&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledHour</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;297&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledMin</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;298&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;299&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;300&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">lastHour</span><span class="default">&nbsp;</span><span class="operators">!=</span><span class="default">&nbsp;</span><span class="identifiers">ledHour</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;301&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">lastHour</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;302&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">ledHour</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">255</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">50</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;303&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;304&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastHour</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledHour</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;305&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;306&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">lastMin</span><span class="default">&nbsp;</span><span class="operators">!=</span><span class="default">&nbsp;</span><span class="identifiers">ledMin</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;307&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">lastMin</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;308&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">ledMin</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">200</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">200</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;309&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">lastCombined</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;310&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">ledHour</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">255</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;311&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastCombined</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;312&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;313&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;314&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledMin</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;315&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;316&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;&nbsp;&nbsp;
</span><br /><span class="linenumbers">&nbsp;317&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;318&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;319&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;if&nbsp;millis()&nbsp;or&nbsp;timer&nbsp;wraps&nbsp;around,&nbsp;we'll&nbsp;just&nbsp;reset&nbsp;it
</span><br /><span class="linenumbers">&nbsp;320&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">())</span><span class="default">&nbsp;</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;321&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;322&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;approximately&nbsp;every&nbsp;10&nbsp;seconds&nbsp;or&nbsp;so,&nbsp;update&nbsp;time
</span><br /><span class="linenumbers">&nbsp;323&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">millis</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">200</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;324&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;reset&nbsp;the&nbsp;timer
</span><br /><span class="linenumbers">&nbsp;325&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">startLED</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;326&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startLED</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;327&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;328&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">startLEDlast</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;329&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">startLED</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;330&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;331&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startLEDlast</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">startLED</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;332&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startLED</span><span class="operators">++;</span>
<br /><span class="linenumbers">&nbsp;333&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//delay(200);
</span><br /><span class="linenumbers">&nbsp;334&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;335&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;336&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;337&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;338&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">navMode</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;339&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">start</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;340&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;341&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">compassCheck</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;342&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;343&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">headingDistance</span><span class="operators">((</span><span class="keywords">double</span><span class="operators">)</span><span class="identifiers">calc_dist</span><span class="operators">(</span><span class="identifiers">fLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">fLon</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLon</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;344&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;345&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">calc_bearing</span><span class="operators">(</span><span class="identifiers">fLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">fLon</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLon</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">compassReading</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;346&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">compassDirection</span><span class="operators">(</span><span class="identifiers">calc_bearing</span><span class="operators">(</span><span class="identifiers">fLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">fLon</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLon</span><span class="operators">)-</span><span class="identifiers">compassReading</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;347&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;348&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;349&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">compassDirection</span><span class="operators">(</span><span class="identifiers">calc_bearing</span><span class="operators">(</span><span class="identifiers">fLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">fLon</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLat</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">targetLon</span><span class="operators">)-</span><span class="identifiers">compassReading</span><span class="operators">+</span><span class="numbers">360</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;350&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;351&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;352&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;353&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;354&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;if&nbsp;millis()&nbsp;or&nbsp;timer&nbsp;wraps&nbsp;around,&nbsp;we'll&nbsp;just&nbsp;reset&nbsp;it
</span><br /><span class="linenumbers">&nbsp;355&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">())</span><span class="default">&nbsp;</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;356&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;357&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;approximately&nbsp;every&nbsp;10&nbsp;seconds&nbsp;or&nbsp;so,&nbsp;update&nbsp;time
</span><br /><span class="linenumbers">&nbsp;358&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">millis</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">200</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;359&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startupTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;reset&nbsp;the&nbsp;timer
</span><br /><span class="linenumbers">&nbsp;360&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">startLED</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;361&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startLED</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;362&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;363&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">startLEDlast</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;364&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">startLED</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;365&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;366&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startLEDlast</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">startLED</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;367&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">startLED</span><span class="operators">++;</span>
<br /><span class="linenumbers">&nbsp;368&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;369&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;370&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;371&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;372&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">calc_bearing</span><span class="operators">(</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flat1</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flon1</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flat2</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flon2</span><span class="operators">)</span>
<br /><span class="linenumbers">&nbsp;373&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;374&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">calc</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;375&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">bear_calc</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;376&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;377&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">x</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">69.1</span><span class="default">&nbsp;</span><span class="operators">*</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">flat2</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">flat1</span><span class="operators">);</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;378&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">y</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">69.1</span><span class="default">&nbsp;</span><span class="operators">*</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">flon2</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">flon1</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">*</span><span class="default">&nbsp;</span><span class="identifiers">cos</span><span class="operators">(</span><span class="identifiers">flat1</span><span class="operators">/</span><span class="numbers">57.3</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;379&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;380&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">calc</span><span class="operators">=</span><span class="identifiers">atan2</span><span class="operators">(</span><span class="identifiers">y</span><span class="operators">,</span><span class="identifiers">x</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;381&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;382&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">bear_calc</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">degrees</span><span class="operators">(</span><span class="identifiers">calc</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;383&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;384&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="operators">(</span><span class="identifiers">bear_calc</span><span class="operators">&lt;=</span><span class="numbers">1</span><span class="operators">){</span>
<br /><span class="linenumbers">&nbsp;385&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">bear_calc</span><span class="operators">=</span><span class="numbers">360</span><span class="operators">+</span><span class="identifiers">bear_calc</span><span class="operators">;</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;386&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;387&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">return</span><span class="default">&nbsp;</span><span class="identifiers">bear_calc</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;388&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;389&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">headingDistance</span><span class="operators">(</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">fDist</span><span class="operators">)</span>
<br /><span class="linenumbers">&nbsp;390&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;391&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//Use&nbsp;this&nbsp;part&nbsp;of&nbsp;the&nbsp;code&nbsp;to&nbsp;determine&nbsp;how&nbsp;far&nbsp;you&nbsp;are&nbsp;away&nbsp;from&nbsp;the&nbsp;destination.
</span><br /><span class="linenumbers">&nbsp;392&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//The&nbsp;total&nbsp;trip&nbsp;distance&nbsp;(from&nbsp;where&nbsp;you&nbsp;started)&nbsp;is&nbsp;divided&nbsp;into&nbsp;five&nbsp;trip&nbsp;segments.
</span><br /><span class="linenumbers">&nbsp;393&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">tripSegment</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">tripDistance</span><span class="operators">/</span><span class="numbers">5</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;394&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;395&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&gt;=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tripSegment</span><span class="operators">*</span><span class="numbers">4</span><span class="operators">))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;396&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;397&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;398&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;399&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;400&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;401&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&gt;=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tripSegment</span><span class="operators">*</span><span class="numbers">3</span><span class="operators">))&amp;&amp;(</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tripSegment</span><span class="operators">*</span><span class="numbers">4</span><span class="operators">)))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;402&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;403&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;404&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;405&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;406&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;407&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&gt;=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tripSegment</span><span class="operators">*</span><span class="numbers">2</span><span class="operators">))&amp;&amp;(</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tripSegment</span><span class="operators">*</span><span class="numbers">3</span><span class="operators">)))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;408&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;409&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;410&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;411&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;412&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;413&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&gt;=</span><span class="default">&nbsp;</span><span class="identifiers">tripSegment</span><span class="operators">)&amp;&amp;(</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tripSegment</span><span class="operators">*</span><span class="numbers">2</span><span class="operators">)))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;414&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;415&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;416&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;417&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;418&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;419&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&gt;=</span><span class="default">&nbsp;</span><span class="numbers">5</span><span class="operators">)&amp;&amp;(</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="identifiers">tripSegment</span><span class="operators">))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;420&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;421&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;422&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;423&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;424&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;425&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">fDist</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="numbers">5</span><span class="operators">))</span><span class="default">&nbsp;</span><span class="operators">{</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;You&nbsp;are&nbsp;now&nbsp;within&nbsp;5&nbsp;meters&nbsp;of&nbsp;your&nbsp;destination.
</span><br /><span class="linenumbers">&nbsp;426&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//Serial.println("Arrived&nbsp;at&nbsp;destination!");
</span><br /><span class="linenumbers">&nbsp;427&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;428&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;429&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;430&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;431&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;432&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;433&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;434&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">unsigned</span><span class="default">&nbsp;</span><span class="keywords">long</span><span class="default">&nbsp;</span><span class="identifiers">calc_dist</span><span class="operators">(</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flat1</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flon1</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flat2</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">flon2</span><span class="operators">)</span>
<br /><span class="linenumbers">&nbsp;435&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;436&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">dist_calc</span><span class="operators">=</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;437&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">dist_calc2</span><span class="operators">=</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;438&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">diflat</span><span class="operators">=</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;439&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">diflon</span><span class="operators">=</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;440&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;441&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">diflat</span><span class="operators">=</span><span class="identifiers">radians</span><span class="operators">(</span><span class="identifiers">flat2</span><span class="operators">-</span><span class="identifiers">flat1</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;442&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">flat1</span><span class="operators">=</span><span class="identifiers">radians</span><span class="operators">(</span><span class="identifiers">flat1</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">flat2</span><span class="operators">=</span><span class="identifiers">radians</span><span class="operators">(</span><span class="identifiers">flat2</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;444&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">diflon</span><span class="operators">=</span><span class="identifiers">radians</span><span class="operators">((</span><span class="identifiers">flon2</span><span class="operators">)-(</span><span class="identifiers">flon1</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;445&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;446&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">sin</span><span class="operators">(</span><span class="identifiers">diflat</span><span class="operators">/</span><span class="numbers">2.0</span><span class="operators">)*</span><span class="identifiers">sin</span><span class="operators">(</span><span class="identifiers">diflat</span><span class="operators">/</span><span class="numbers">2.0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;447&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc2</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">cos</span><span class="operators">(</span><span class="identifiers">flat1</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;448&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc2</span><span class="operators">*=</span><span class="identifiers">cos</span><span class="operators">(</span><span class="identifiers">flat2</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;449&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc2</span><span class="operators">*=</span><span class="identifiers">sin</span><span class="operators">(</span><span class="identifiers">diflon</span><span class="operators">/</span><span class="numbers">2.0</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;450&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc2</span><span class="operators">*=</span><span class="identifiers">sin</span><span class="operators">(</span><span class="identifiers">diflon</span><span class="operators">/</span><span class="numbers">2.0</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;451&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc</span><span class="default">&nbsp;</span><span class="operators">+=</span><span class="identifiers">dist_calc2</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;452&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;453&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc</span><span class="operators">=(</span><span class="numbers">2</span><span class="operators">*</span><span class="identifiers">atan2</span><span class="operators">(</span><span class="identifiers">sqrt</span><span class="operators">(</span><span class="identifiers">dist_calc</span><span class="operators">),</span><span class="identifiers">sqrt</span><span class="operators">(</span><span class="numbers">1.0</span><span class="operators">-</span><span class="identifiers">dist_calc</span><span class="operators">)));</span>
<br /><span class="linenumbers">&nbsp;454&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;455&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dist_calc</span><span class="operators">*=</span><span class="numbers">6371000.0</span><span class="operators">;</span><span class="default">&nbsp;</span><span class="comments">//Converting&nbsp;to&nbsp;meters
</span><br /><span class="linenumbers">&nbsp;456&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">return</span><span class="default">&nbsp;</span><span class="identifiers">dist_calc</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;457&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;458&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;459&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Convert&nbsp;NMEA&nbsp;coordinate&nbsp;to&nbsp;decimal&nbsp;degrees
</span><br /><span class="linenumbers">&nbsp;460&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">decimalDegrees</span><span class="operators">(</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">nmeaCoord</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="keywords">char</span><span class="default">&nbsp;</span><span class="identifiers">dir</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;461&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">uint16_t</span><span class="default">&nbsp;</span><span class="identifiers">wholeDegrees</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0.01</span><span class="operators">*</span><span class="identifiers">nmeaCoord</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;462&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">modifier</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;463&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;464&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">dir</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="strings">'W'</span><span class="default">&nbsp;</span><span class="operators">||</span><span class="default">&nbsp;</span><span class="identifiers">dir</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="strings">'S'</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;465&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">modifier</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="numbers">1</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;466&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;467&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;468&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">return</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">wholeDegrees</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">nmeaCoord</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="numbers">100.0</span><span class="operators">*</span><span class="identifiers">wholeDegrees</span><span class="operators">)/</span><span class="numbers">60.0</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">*</span><span class="default">&nbsp;</span><span class="identifiers">modifier</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;469&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;470&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;471&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">compassMode</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;472&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dirLED_r</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;473&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dirLED_g</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;474&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">dirLED_b</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">255</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;475&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="identifiers">compassDirection</span><span class="operators">(</span><span class="identifiers">compassReading</span><span class="operators">);</span><span class="default">&nbsp;&nbsp;&nbsp;
</span><br /><span class="linenumbers">&nbsp;476&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;477&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;478&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">compassCheck</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;479&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;if&nbsp;millis()&nbsp;or&nbsp;timer&nbsp;wraps&nbsp;around,&nbsp;we'll&nbsp;just&nbsp;reset&nbsp;it
</span><br /><span class="linenumbers">&nbsp;480&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">compassTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">())</span><span class="default">&nbsp;</span><span class="identifiers">compassTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;481&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;482&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//&nbsp;approximately&nbsp;every&nbsp;10&nbsp;seconds&nbsp;or&nbsp;so,&nbsp;update&nbsp;time
</span><br /><span class="linenumbers">&nbsp;483&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">millis</span><span class="operators">()</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">compassTimer</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">50</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;484&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">/*&nbsp;Get&nbsp;a&nbsp;new&nbsp;sensor&nbsp;event&nbsp;*/</span>
<br /><span class="linenumbers">&nbsp;485&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">sensors_event_t</span><span class="default">&nbsp;</span><span class="identifiers">event</span><span class="operators">;</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;486&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">mag</span><span class="operators">.</span><span class="identifiers">getEvent</span><span class="operators">(&amp;</span><span class="identifiers">event</span><span class="operators">);</span>
<br /><span class="linenumbers">&nbsp;487&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;488&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">Pi</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">3.14159</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;489&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;490&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">compassTimer</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">millis</span><span class="operators">();</span><span class="default">&nbsp;</span><span class="comments">//&nbsp;reset&nbsp;the&nbsp;timer
</span><br /><span class="linenumbers">&nbsp;491&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;492&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Calculate&nbsp;the&nbsp;angle&nbsp;of&nbsp;the&nbsp;vector&nbsp;y,x
</span><br /><span class="linenumbers">&nbsp;493&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">heading</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">atan2</span><span class="operators">(</span><span class="identifiers">event</span><span class="operators">.</span><span class="identifiers">magnetic</span><span class="operators">.</span><span class="identifiers">y</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="identifiers">magyOffset</span><span class="operators">,</span><span class="identifiers">event</span><span class="operators">.</span><span class="identifiers">magnetic</span><span class="operators">.</span><span class="identifiers">x</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="identifiers">magxOffset</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">*</span><span class="default">&nbsp;</span><span class="numbers">180</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">/</span><span class="default">&nbsp;</span><span class="identifiers">Pi</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;494&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;495&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">//&nbsp;Normalize&nbsp;to&nbsp;0-360
</span><br /><span class="linenumbers">&nbsp;496&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">heading</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">)</span>
<br /><span class="linenumbers">&nbsp;497&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;498&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">heading</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">360</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="identifiers">heading</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;499&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;500&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">compassReading</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">heading</span><span class="operators">;</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;501&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;&nbsp;
</span><br /><span class="linenumbers">&nbsp;502&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;&nbsp;
</span><br /><span class="linenumbers">&nbsp;503&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;504&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">void</span><span class="default">&nbsp;</span><span class="identifiers">compassDirection</span><span class="operators">(</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">compassHeading</span><span class="operators">)</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;505&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;506&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//Serial.print("Compass&nbsp;Direction:&nbsp;");
</span><br /><span class="linenumbers">&nbsp;507&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//Serial.println(compassHeading);
</span><br /><span class="linenumbers">&nbsp;508&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;509&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">unsigned</span><span class="default">&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">2</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;510&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;511&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//Use&nbsp;this&nbsp;part&nbsp;of&nbsp;the&nbsp;code&nbsp;to&nbsp;determine&nbsp;which&nbsp;way&nbsp;you&nbsp;need&nbsp;to&nbsp;go.
</span><br /><span class="linenumbers">&nbsp;512&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="comments">//Remember:&nbsp;this&nbsp;is&nbsp;not&nbsp;the&nbsp;direction&nbsp;you&nbsp;are&nbsp;heading,&nbsp;it&nbsp;is&nbsp;the&nbsp;direction&nbsp;to&nbsp;the&nbsp;destination&nbsp;(north&nbsp;=&nbsp;forward).
</span><br /><span class="linenumbers">&nbsp;513&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;514&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">compassHeading</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">348.75</span><span class="operators">)||(</span><span class="identifiers">compassHeading</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="numbers">11.25</span><span class="operators">))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;515&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">topLED</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;516&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;517&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">for</span><span class="operators">(</span><span class="keywords">int</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">;</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="operators">++){</span>
<br /><span class="linenumbers">&nbsp;518&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">pieSliceCenter</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="numbers">45</span><span class="operators">/</span><span class="numbers">2</span><span class="operators">*</span><span class="identifiers">i</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;519&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">pieSliceMin</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">pieSliceCenter</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="numbers">11.25</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;520&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">float</span><span class="default">&nbsp;</span><span class="identifiers">pieSliceMax</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">pieSliceCenter</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="numbers">11.25</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;521&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">((</span><span class="identifiers">compassHeading</span><span class="default">&nbsp;</span><span class="operators">&gt;=</span><span class="default">&nbsp;</span><span class="identifiers">pieSliceMin</span><span class="operators">)&amp;&amp;(</span><span class="identifiers">compassHeading</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="identifiers">pieSliceMax</span><span class="operators">))</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;522&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">2</span><span class="default">&nbsp;</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;523&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">topLED</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;524&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;525&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;526&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">topLED</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="identifiers">i</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;527&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;528&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;529&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;530&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;531&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">15</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;532&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;533&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;534&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;535&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">&lt;</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;536&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">tempDir</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;537&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;538&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;539&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">tempDir</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;540&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;541&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;542&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">mode</span><span class="default">&nbsp;</span><span class="operators">==</span><span class="default">&nbsp;</span><span class="numbers">1</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;543&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="identifiers">compassOffset</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;544&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">15</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;545&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;546&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;547&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span><span class="default">&nbsp;
</span><br /><span class="linenumbers">&nbsp;548&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">else</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;549&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">+</span><span class="default">&nbsp;</span><span class="identifiers">compassOffset</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;550&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">&gt;</span><span class="default">&nbsp;</span><span class="numbers">15</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;551&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledDir</span><span class="default">&nbsp;</span><span class="operators">-</span><span class="default">&nbsp;</span><span class="numbers">16</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;552&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;553&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;554&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br /><span class="linenumbers">&nbsp;555&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="keywords">if</span><span class="default">&nbsp;</span><span class="operators">(</span><span class="identifiers">lastDir</span><span class="default">&nbsp;</span><span class="operators">!=</span><span class="default">&nbsp;</span><span class="identifiers">ledDir</span><span class="operators">)</span><span class="default">&nbsp;</span><span class="operators">{</span>
<br /><span class="linenumbers">&nbsp;556&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">lastDir</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="numbers">0</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;557&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">setPixelColor</span><span class="operators">(</span><span class="identifiers">ledDir</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">Color</span><span class="operators">(</span><span class="identifiers">dirLED_r</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">dirLED_g</span><span class="operators">,</span><span class="default">&nbsp;</span><span class="identifiers">dirLED_b</span><span class="operators">));</span>
<br /><span class="linenumbers">&nbsp;558&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">strip</span><span class="operators">.</span><span class="identifiers">show</span><span class="operators">();</span>
<br /><span class="linenumbers">&nbsp;559&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="identifiers">lastDir</span><span class="default">&nbsp;</span><span class="operators">=</span><span class="default">&nbsp;</span><span class="identifiers">ledDir</span><span class="operators">;</span>
<br /><span class="linenumbers">&nbsp;560&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="default">&nbsp;&nbsp;</span><span class="operators">}</span>
<br /><span class="linenumbers">&nbsp;561&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="operators">}</span>
</p></body></html>
